name: The Ultimate Forge - AI Android App Builder

on:
  workflow_dispatch:
    inputs:
      app_idea:
        description: 'ÙˆØµÙ ÙƒØ§Ù…Ù„ Ù„Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ (Ø£ÙŠ ØªØ·Ø¨ÙŠÙ‚ Ø¨Ø£ÙŠ ØªØ¹Ù‚ÙŠØ¯)'
        required: true
        default: 'ØªØ·Ø¨ÙŠÙ‚ Ù…ØªÙƒØ§Ù…Ù„ Ø¨Ø¥Ù…ÙƒØ§Ù†ÙŠØ§Øª ØºÙŠØ± Ù…Ø­Ø¯ÙˆØ¯Ø©'
      app_name:
        description: 'Ø§Ø³Ù… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚'
        required: true
        default: 'MyAIApp'
      package_name:
        description: 'Ø§Ø³Ù… Ø§Ù„Ø­Ø²Ù…Ø© (com.company.app)'
        required: true
        default: 'com.ai.forge.app'
      use_kotlin:
        description: 'Ø§Ø³ØªØ®Ø¯Ø§Ù… Kotlin Ø¨Ø¯Ù„ Java'
        required: true
        default: 'true'
        type: choice
        options:
          - 'true'
          - 'false'
      use_compose:
        description: 'Ø§Ø³ØªØ®Ø¯Ø§Ù… Jetpack Compose'
        required: true
        default: 'true'
        type: choice
        options:
          - 'true'
          - 'false'
      target_sdk:
        description: 'Ø¥ØµØ¯Ø§Ø± Android SDK Ø§Ù„Ù‡Ø¯Ù'
        required: true
        default: '34'
      include_ai:
        description: 'ØªØ¶Ù…ÙŠÙ† Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ'
        required: true
        default: 'true'
        type: choice
        options:
          - 'true'
          - 'false'

permissions:
  contents: write
  packages: write

jobs:
  build-universal-app:
    runs-on: ubuntu-latest
    timeout-minutes: 30
    
    steps:
      - name: ğŸš€ Ø¨Ø¯Ø¡ Ø§Ù„Ø¨Ù†Ø§Ø¡ - The Ultimate Forge
        run: |
          echo "========================================"
          echo "   ğŸ—ï¸ THE ULTIMATE FORGE v2.0"
          echo "   AI Android App Builder"
          echo "========================================"
          echo "ğŸ“± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚: ${{ github.event.inputs.app_name }}"
          echo "ğŸ’¡ Ø§Ù„ÙÙƒØ±Ø©: ${{ github.event.inputs.app_idea }}"
          echo "ğŸ“¦ Ø§Ù„Ø­Ø²Ù…Ø©: ${{ github.event.inputs.package_name }}"
          echo "ğŸ¯ SDK: ${{ github.event.inputs.target_sdk }}"
          echo "========================================"
      
      - name: ğŸ“¥ ØªÙ†Ø¸ÙŠÙ ÙˆØ§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹
        run: |
          # ØªÙ†Ø¸ÙŠÙ Ø£ÙŠ Ù…Ù„ÙØ§Øª Ù‚Ø¯ÙŠÙ…Ø©
          rm -rf app/src/main/java/* 2>/dev/null || true
          rm -rf app/src/main/kotlin/* 2>/dev/null || true
          rm -rf app/src/main/res/layout/* 2>/dev/null || true
          rm -rf app/src/main/res/values/* 2>/dev/null || true
          echo "âœ… ØªÙ… ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"
      
      - name: â˜• Ø¥Ø¹Ø¯Ø§Ø¯ Ø¨ÙŠØ¦Ø© Android Ø§Ù„ÙƒØ§Ù…Ù„Ø©
        uses: actions/setup-java@v4
        with:
          java-version: '17'
          distribution: 'temurin'
      
      - name: ğŸ”§ ØªØ«Ø¨ÙŠØª Ø£Ø¯ÙˆØ§Øª Android SDK
        run: |
          # Ù‚Ø¨ÙˆÙ„ ØªØ±Ø§Ø®ÙŠØµ SDK
          yes | sdkmanager --licenses 2>/dev/null || true
          # ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø¯ÙˆØ§Øª
          sdkmanager "platform-tools" "platforms;android-${{ github.event.inputs.target_sdk }}" 2>/dev/null || true
          echo "âœ… ØªÙ… Ø¥Ø¹Ø¯Ø§Ø¯ Ø¨ÙŠØ¦Ø© Android SDK"
      
      - name: ğŸ¤– ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„ Ù…Ø¹ DeepSeek
        id: generate_app
        env:
          DEEPSEEK_API_KEY: ${{ secrets.DEEPSEEK_API_KEY }}
          APP_IDEA: ${{ github.event.inputs.app_idea }}
          APP_NAME: ${{ github.event.inputs.app_name }}
          PACKAGE_NAME: ${{ github.event.inputs.package_name }}
          USE_KOTLIN: ${{ github.event.inputs.use_kotlin }}
          USE_COMPOSE: ${{ github.event.inputs.use_compose }}
          TARGET_SDK: ${{ github.event.inputs.target_sdk }}
          INCLUDE_AI: ${{ github.event.inputs.include_ai }}
        run: |
          pip3 install requests
          python3 << 'EOF'
          import os, requests, re, json, sys, base64, hashlib, textwrap, subprocess, time
          from pathlib import Path
          
          # ===== ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª =====
          DEEPSEEK_API_KEY = os.getenv('DEEPSEEK_API_KEY')
          APP_IDEA = os.getenv('APP_IDEA', 'ØªØ·Ø¨ÙŠÙ‚ Ø£Ù†Ø¯Ø±ÙˆÙŠØ¯ Ù…ØªÙƒØ§Ù…Ù„')
          APP_NAME = os.getenv('APP_NAME', 'MyAIApp')
          PACKAGE_NAME = os.getenv('PACKAGE_NAME', 'com.ai.forge.app')
          USE_KOTLIN = os.getenv('USE_KOTLIN', 'true') == 'true'
          USE_COMPOSE = os.getenv('USE_COMPOSE', 'true') == 'true'
          TARGET_SDK = os.getenv('TARGET_SDK', '34')
          INCLUDE_AI = os.getenv('INCLUDE_AI', 'true') == 'true'
          
          if not DEEPSEEK_API_KEY:
              print("âŒ Ø®Ø·Ø£: Ù…Ø·Ù„ÙˆØ¨ DEEPSEEK_API_KEY ÙÙŠ GitHub Secrets")
              print("ğŸ’¡ Ø£Ø¶Ù Ù…ÙØªØ§Ø­ API Ù…Ù† https://platform.deepseek.com/api_keys")
              sys.exit(1)
          
          # ===== Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ =====
          LANGUAGE = 'kotlin' if USE_KOTLIN else 'java'
          UI_FRAMEWORK = 'compose' if USE_COMPOSE else 'xml'
          MIN_SDK = '24'  # Android 7.0 - ÙŠØ¯Ø¹Ù… Ù…Ø¹Ø¸Ù… Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©
          
          print(f"""
          ========================================
          ğŸ—ï¸  Ultimate Forge - Ø¨Ù†Ø§Ø¡ ØªØ·Ø¨ÙŠÙ‚ Ù…ØªÙƒØ§Ù…Ù„
          ========================================
          ğŸ“± Ø§Ø³Ù… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚: {APP_NAME}
          ğŸ’¡ Ø§Ù„ÙÙƒØ±Ø©: {APP_IDEA[:100]}...
          ğŸ“¦ Ø§Ù„Ø­Ø²Ù…Ø©: {PACKAGE_NAME}
          ğŸ¯ Ù„ØºØ© Ø§Ù„Ø¨Ø±Ù…Ø¬Ø©: {LANGUAGE.upper()}
          ğŸ¨ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: {UI_FRAMEWORK.upper()}
          ğŸ“Š Android SDK: {MIN_SDK} â†’ {TARGET_SDK}
          ğŸ¤– Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ: {'âœ…' if INCLUDE_AI else 'âŒ'}
          ========================================
          """)
          
          # ===== Ø·Ù„Ø¨ DeepSeek API =====
          def call_deepseek(prompt, max_tokens=8000):
              url = "https://api.deepseek.com/chat/completions"
              headers = {
                  "Authorization": f"Bearer {DEEPSEEK_API_KEY}",
                  "Content-Type": "application/json"
              }
              
              payload = {
                  "model": "deepseek-chat",
                  "messages": [
                      {
                          "role": "system", 
                          "content": """Ø£Ù†Øª Ù…Ø·ÙˆØ± Ø£Ù†Ø¯Ø±ÙˆÙŠØ¯ Ù…Ø­ØªØ±Ù Ù…Ø¹ Ø®Ø¨Ø±Ø© 10+ Ø³Ù†ÙˆØ§Øª.
                          Ù…Ù‡Ù…ØªÙƒ: Ø¨Ù†Ø§Ø¡ ØªØ·Ø¨ÙŠÙ‚ Ø£Ù†Ø¯Ø±ÙˆÙŠØ¯ Ù…ØªÙƒØ§Ù…Ù„ ÙˆØ®Ø§Ù„ÙŠ Ù…Ù† Ø§Ù„Ø£Ø®Ø·Ø§Ø¡.
                          
                          Ø§Ù„Ù‚ÙˆØ§Ø¹Ø¯:
                          1. Ø£Ø¹Ø¯ ÙƒÙˆØ¯Ù‹Ø§ ÙŠØ¹Ù…Ù„ Ù…Ø¨Ø§Ø´Ø±Ø© Ø¯ÙˆÙ† ØªØ¹Ø¯ÙŠÙ„
                          2. Ø§Ø³ØªØ®Ø¯Ù… Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù…Ø§Ø±Ø³Ø§Øª ÙˆØ£Ø­Ø¯Ø« Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª
                          3. Ø£Ø¶Ù ØªØ¹Ù„ÙŠÙ‚Ø§Øª ØªÙˆØ¶ÙŠØ­ÙŠØ©
                          4. ØªÙˆÙ‚Ø¹ ÙˆØ­Ù„ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ù…Ø­ØªÙ…Ù„Ø©
                          5. Ø£Ø¯Ø®Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
                          6. ØªØ£ÙƒØ¯ Ù…Ù† ØªÙˆØ§ÙÙ‚ Ø§Ù„ÙƒÙˆØ¯ Ù…Ø¹ Android SDK Ø§Ù„Ù…Ø­Ø¯Ø¯
                          7. Ø§Ø³ØªØ®Ø¯Ù… Clean Architecture Ùˆ MVVM
                          8. Ø£Ø¶Ù Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡
                          9. ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù…Ø§Ù† Ø§Ù„ÙƒÙˆØ¯
                          10. Ø£ÙƒØªØ¨ ÙƒÙˆØ¯Ù‹Ø§ Ù†Ø¸ÙŠÙÙ‹Ø§ ÙˆÙ‚Ø§Ø¨Ù„ Ù„Ù„ØµÙŠØ§Ù†Ø©
                          
                          ØµÙŠØºØ© Ø§Ù„Ø±Ø¯: Ù„ÙƒÙ„ Ù…Ù„Ù:
                          ### FILE: Ù…Ø³Ø§Ø±/Ø§Ù„Ù…Ù„Ù
                          // Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ù„Ù
                          ### ENDFILE"""
                      },
                      {
                          "role": "user",
                          "content": prompt
                      }
                  ],
                  "temperature": 0.3,
                  "max_tokens": max_tokens,
                  "stream": False
              }
              
              try:
                  print(f"ğŸ¤– Ø¬Ø§Ø±ÙŠ Ø§Ø³ØªØ´Ø§Ø±Ø© DeepSeek AI...")
                  response = requests.post(url, json=payload, headers=headers, timeout=120)
                  
                  if response.status_code == 200:
                      data = response.json()
                      return data['choices'][0]['message']['content']
                  else:
                      print(f"âŒ Ø®Ø·Ø£ API: {response.status_code}")
                      print(f"Ø§Ù„Ø±Ø¯: {response.text}")
                      return None
                      
              except Exception as e:
                  print(f"âŒ Ø§Ø³ØªØ«Ù†Ø§Ø¡: {str(e)}")
                  return None
          
          # ===== Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„ =====
          def build_complete_prompt():
              ai_features = ""
              if INCLUDE_AI:
                  ai_features = """
                  - Ø¯Ù…Ø¬ API Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ (OpenAI/DeepSeek/Gemini)
                  - Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù†ØµÙˆØµ Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ
                  - ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ØµÙˆØ±/Ø§Ù„Ù†ØµÙˆØµ
                  - ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ
                  - Ø´Ø§Øª Ø¨ÙˆØª Ù…Ø¯Ù…Ø¬
                  """
              
              compose_ui = ""
              if USE_COMPOSE:
                  compose_ui = """
                  - Ø§Ø³ØªØ®Ø¯Ù… Jetpack Compose Ù„Ù„ÙˆØ§Ø¬Ù‡Ø©
                  - Ø§Ø³ØªØ®Ø¯Ù… Material 3 Design
                  - Ø£Ø¶Ù animations Ùˆ transitions
                  - Ø§Ø³ØªØ®Ø¯Ù… Compose Navigation
                  - Ø£Ø¶Ù Themes Ù…ØªØ¹Ø¯Ø¯Ø©
                  """
              else:
                  compose_ui = """
                  - Ø§Ø³ØªØ®Ø¯Ù… XML layouts
                  - Ø§Ø³ØªØ®Ø¯Ù… ViewBinding/DataBinding
                  - Ø£Ø¶Ù RecyclerView Ù…Ø¹ adapters
                  - Ø§Ø³ØªØ®Ø¯Ù… Fragments Ù…Ø¹ Navigation
                  """
              
              return f"""
              # ğŸ“± Ø¨Ù†Ø§Ø¡ ØªØ·Ø¨ÙŠÙ‚ Ø£Ù†Ø¯Ø±ÙˆÙŠØ¯ Ù…ØªÙƒØ§Ù…Ù„
              
              ## ğŸ¯ Ù…ÙˆØ§ØµÙØ§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚:
              - **Ø§Ø³Ù… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚**: {APP_NAME}
              - **ÙÙƒØ±Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚**: {APP_IDEA}
              - **Ø§Ø³Ù… Ø§Ù„Ø­Ø²Ù…Ø©**: {PACKAGE_NAME}
              - **Ù„ØºØ© Ø§Ù„Ø¨Ø±Ù…Ø¬Ø©**: {LANGUAGE.upper()}
              - **ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…**: {UI_FRAMEWORK.upper()}
              - **Ø¥ØµØ¯Ø§Ø± Android Ø§Ù„Ø£Ø¯Ù†Ù‰**: {MIN_SDK}
              - **Ø¥ØµØ¯Ø§Ø± Android Ø§Ù„Ù‡Ø¯Ù**: {TARGET_SDK}
              
              ## ğŸ—ï¸ Ø¨Ù†ÙŠØ© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ (Clean Architecture):
              ```
              {PACKAGE_NAME.replace('.', '/')}/
              â”œâ”€â”€ data/           (Ø·Ø¨Ù‚Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª)
              â”‚   â”œâ”€â”€ local/      (Room Database)
              â”‚   â”œâ”€â”€ remote/     (Retrofit API)
              â”‚   â””â”€â”€ repository/ (Ù…Ø³ØªÙˆØ¯Ø¹Ø§Øª)
              â”œâ”€â”€ domain/         (Ø·Ø¨Ù‚Ø© Ø§Ù„Ø£Ø¹Ù…Ø§Ù„)
              â”‚   â”œâ”€â”€ models/     (Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª)
              â”‚   â”œâ”€â”€ usecases/   (Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…)
              â”‚   â””â”€â”€ repository/ (ÙˆØ§Ø¬Ù‡Ø§Øª)
              â””â”€â”€ presentation/   (Ø·Ø¨Ù‚Ø© Ø§Ù„Ø¹Ø±Ø¶)
                  â”œâ”€â”€ ui/         (ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…)
                  â”œâ”€â”€ viewmodel/  (ViewModel)
                  â””â”€â”€ utils/      (Ø£Ø¯ÙˆØ§Øª Ù…Ø³Ø§Ø¹Ø¯Ø©)
              ```
              
              ## ğŸš€ Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:
              1. **Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ù…ØªÙ‚Ø¯Ù…**:
              {compose_ui}
              
              2. **Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª**:
              - Room Database Ù…Ø¹ Flow/LiveData
              - migrations Ùˆ pre-population
              - DAOs Ù…Ø¹ Ø¹Ù„Ø§Ù‚Ø§Øª
              
              3. **Ø§Ù„Ø´Ø¨ÙƒØ§Øª ÙˆØ§Ù„Ù€ APIs**:
              - Retrofit2 Ù…Ø¹ Moshi/Gson
              - OkHttp Ù…Ø¹ interceptors
              - pagination Ùˆ caching
              
              4. **Ø§Ù„Ø­Ø§Ù„Ø© ÙˆØ§Ù„ØªØ²Ø§Ù…Ù†**:
              - Kotlin Coroutines Ùˆ Flow
              - State Management
              - Error Handling
              
              5. **Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª**:
              - DI Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Hilt/Dagger
              - Navigation Component
              - WorkManager Ù„Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ù…Ø¬Ø¯ÙˆÙ„Ø©
              - Notifications
              
              6. **Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª**:
              - Unit Tests (JUnit)
              - UI Tests (Espresso)
              
              7. **Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ**:
              {ai_features if INCLUDE_AI else "- Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…ÙŠØ²Ø§Øª Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ"}
              
              ## ğŸ“ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:
              
              ### 1. Ù…Ù„ÙØ§Øª Ø§Ù„ØªÙƒÙˆÙŠÙ†:
              - settings.gradle
              - build.gradle (root)
              - app/build.gradle
              - gradle.properties
              - proguard-rules.pro
              
              ### 2. Ù…Ù„ÙØ§Øª Android:
              - AndroidManifest.xml
              - Ù…Ù„ÙØ§Øª res/ (themes.xml, colors.xml, strings.xml, etc.)
              
              ### 3. Ù…Ù„ÙØ§Øª Ø§Ù„Ù…ØµØ¯Ø±:
              - Application Class
              - MainActivity
              - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù€ Activities/Fragments/Composables
              - ViewModels
              - Repositories
              - UseCases
              - Models/Entities
              - Adapters
              - Utils
              - DI Modules
              
              ### 4. Ù…Ù„ÙØ§Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±:
              - Unit Tests
              - Instrumentation Tests
              
              ## ğŸ¨ Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„ÙÙ†ÙŠØ©:
              
              **1. Ø£Ø­Ø¯Ø« Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª (2024):**
              - androidx.core:core-ktx:1.12.0
              - androidx.lifecycle:lifecycle-runtime-ktx:2.7.0
              - androidx.activity:activity-compose:1.8.2
              - compose-bom:2024.02.01
              - retrofit:2.9.0
              - room:2.6.1
              - hilt:2.48
              - coil/compose:2.5.0
              
              **2. Ø¯Ø¹Ù… Ø§Ù„Ø¥ØµØ¯Ø§Ø±Ø§Øª Ø§Ù„Ø­Ø¯ÙŠØ«Ø©:**
              - compileSdk {TARGET_SDK}
              - targetSdk {TARGET_SDK}
              - minSdk {MIN_SDK}
              - Java 17 Ø£Ùˆ Kotlin 1.9
              
              **3. Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù…Ø§Ø±Ø³Ø§Øª:**
              - Clean Architecture + MVVM
              - Single Activity Architecture
              - Repository Pattern
              - Dependency Injection
              - Modular Design
              - Error Boundaries
              - Logging System
              
              ## ğŸ“ Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©:
              
              1. Ø£ÙƒÙ…Ù„ Ø¨Ù†Ø§Ø¡ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙƒØ§Ù…Ù„Ø§Ù‹
              2. ØªØ£ÙƒØ¯ Ù…Ù† Ø¹Ù…Ù„ Ø§Ù„ÙƒÙˆØ¯ Ù…Ø¨Ø§Ø´Ø±Ø©
              3. Ø£Ø¶Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø¶Ø±ÙˆØ±ÙŠØ©
              4. Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù€ package name Ø§Ù„Ù…Ø­Ø¯Ø¯
              5. ØªØ£ÙƒØ¯ Ù…Ù† Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ø£Ø®Ø·Ø§Ø¡
              6. Ø£Ø¶Ù ØªØ¹Ù„ÙŠÙ‚Ø§Øª ØªÙˆØ¶ÙŠØ­ÙŠØ©
              7. Ø§ØªØ¨Ø¹ coding conventions
              8. Ø£Ø¶Ù Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø§Ø³ØªØ«Ù†Ø§Ø¡Ø§Øª
              9. ØªØ£ÙƒØ¯ Ù…Ù† security best practices
              10. Ø§Ø®ØªØ± Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø© Ù„ÙÙƒØ±Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
              
              ## ğŸ¯ Ù…Ø«Ø§Ù„ Ù„Ù„Ù€ FILE FORMAT:
              ### FILE: app/src/main/{LANGUAGE}/{PACKAGE_NAME.replace('.', '/')}/MainActivity.{'kt' if USE_KOTLIN else 'java'}
              package {PACKAGE_NAME}
              
              import ...
              // ÙƒÙˆØ¯ Ø§Ù„Ù…Ù„Ù
              ### ENDFILE
              """
          
          # ===== ØªÙ†ÙÙŠØ° Ø§Ù„Ø·Ù„Ø¨ =====
          print("ğŸš€ Ø¬Ø§Ø±ÙŠ Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„...")
          prompt = build_complete_prompt()
          
          print("ğŸ“¡ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ DeepSeek API...")
          response = call_deepseek(prompt, max_tokens=12000)
          
          if not response:
              print("âŒ ÙØ´Ù„ ÙÙŠ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø±Ø¯ Ù…Ù† DeepSeek")
              sys.exit(1)
          
          print(f"âœ… ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø±Ø¯ ({len(response)} Ø­Ø±Ù)")
          
          # ===== Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø±Ø¯ ÙˆØ¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ù„ÙØ§Øª =====
          print("ğŸ“‚ Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ù„ÙØ§Øª...")
          
          # Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ù…Ù„ÙØ§Øª Ù…Ù† Ø§Ù„Ø±Ø¯
          file_pattern = r'### FILE:\s*(.+?)\n(.*?)### ENDFILE'
          files = re.findall(file_pattern, response, re.DOTALL)
          
          if not files:
              print("âš ï¸ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…Ù„ÙØ§Øª Ø¨Ø§Ù„ØµÙŠØºØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©")
              print("ğŸ’¡ Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ù…Ù„ÙØ§Øª ÙŠØ¯ÙˆÙŠØ§Ù‹...")
              
              # Ù…Ø­Ø§ÙˆÙ„Ø© Ø¨Ø¯ÙŠÙ„Ø© Ù„Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ù…Ù„ÙØ§Øª
              lines = response.split('\n')
              current_file = None
              current_content = []
              
              for line in lines:
                  if line.startswith('// FILE:') or line.startswith('## FILE:'):
                      if current_file:
                          files.append((current_file, '\n'.join(current_content)))
                      current_file = line.split('FILE:')[1].strip()
                      current_content = []
                  elif current_file:
                      current_content.append(line)
              
              if current_file:
                  files.append((current_file, '\n'.join(current_content)))
          
          print(f"ğŸ” Ø¹ÙØ«Ø± Ø¹Ù„Ù‰ {len(files)} Ù…Ù„Ù(Ø§Øª)")
          
          # Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ù„ÙØ§Øª
          created_files = 0
          for filename, content in files:
              try:
                  # ØªÙ†Ø¸ÙŠÙ Ø§Ø³Ù… Ø§Ù„Ù…Ù„Ù ÙˆØ§Ù„Ù…Ø­ØªÙˆÙ‰
                  filename = filename.strip()
                  content = content.strip()
                  
                  # ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø§Ù„Ø¯Ù„ÙŠÙ„
                  os.makedirs(os.path.dirname(filename), exist_ok=True)
                  
                  # Ø­ÙØ¸ Ø§Ù„Ù…Ù„Ù
                  with open(filename, 'w', encoding='utf-8') as f:
                      f.write(content)
                  
                  created_files += 1
                  print(f"   âœ… {filename} ({len(content)} Ø­Ø±Ù)")
                  
              except Exception as e:
                  print(f"   âŒ Ø®Ø·Ø£ ÙÙŠ {filename}: {str(e)}")
          
          # ===== Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„ÙØ§Øª Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø¥Ø°Ø§ ÙØ´Ù„ Ø§Ù„Ù€ AI =====
          if created_files < 5:  # Ø¥Ø°Ø§ Ù„Ù… ÙŠÙ†Ø´Ø¦ Ù…Ù„ÙØ§Øª ÙƒØ§ÙÙŠØ©
              print("âš ï¸ Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„ÙØ§Øª Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©...")
              
              # Ø¥Ù†Ø´Ø§Ø¡ Ù‡ÙŠÙƒÙ„ Ø§Ù„Ø­Ø²Ù…Ø©
              package_path = f"app/src/main/{LANGUAGE}/{PACKAGE_NAME.replace('.', '/')}"
              os.makedirs(package_path, exist_ok=True)
              
              # Ø¥Ù†Ø´Ø§Ø¡ MainActivity
              main_activity_file = f"{package_path}/MainActivity.{'kt' if USE_KOTLIN else 'java'}"
              if USE_KOTLIN:
                  main_content = f"""package {PACKAGE_NAME}

import android.os.Bundle
import androidx.activity.ComponentActivity
import androidx.activity.compose.setContent
import androidx.compose.foundation.layout.fillMaxSize
import androidx.compose.material3.MaterialTheme
import androidx.compose.material3.Surface
import androidx.compose.material3.Text
import androidx.compose.runtime.Composable
import androidx.compose.ui.Modifier
import androidx.compose.ui.tooling.preview.Preview
import {PACKAGE_NAME}.ui.theme.{APP_NAME.replace(' ', '')}Theme

class MainActivity : ComponentActivity() {{
    override fun onCreate(savedInstanceState: Bundle?) {{
        super.onCreate(savedInstanceState)
        setContent {{
            {APP_NAME.replace(' ', '')}Theme {{
                Surface(
                    modifier = Modifier.fillMaxSize(),
                    color = MaterialTheme.colorScheme.background
                ) {{
                    Greeting("{APP_NAME}")
                }}
            }}
        }}
    }}
}}

@Composable
fun Greeting(name: String, modifier: Modifier = Modifier) {{
    Text(
        text = "Hello $name!",
        modifier = modifier
    )
}}

@Preview(showBackground = true)
@Composable
fun GreetingPreview() {{
    {APP_NAME.replace(' ', '')}Theme {{
        Greeting("Android")
    }}
}}"""
              else:
                  main_content = f"""package {PACKAGE_NAME};

import android.os.Bundle;
import androidx.appcompat.app.AppCompatActivity;
import android.widget.TextView;

public class MainActivity extends AppCompatActivity {{
    @Override
    protected void onCreate(Bundle savedInstanceState) {{
        super.onCreate(savedInstanceState);
        
        TextView textView = new TextView(this);
        textView.setText("Welcome to {APP_NAME}");
        textView.setTextSize(24);
        
        setContentView(textView);
    }}
}}"""
              
              with open(main_activity_file, 'w', encoding='utf-8') as f:
                  f.write(main_content)
              
              print(f"   âœ… {main_activity_file} (Ù…Ù„Ù Ø§Ø­ØªÙŠØ§Ø·ÙŠ)")
          
          # ===== Ø­ÙØ¸ Ø§Ù„Ø±Ø¯ Ø§Ù„ÙƒØ§Ù…Ù„ =====
          with open('ai_response_full.txt', 'w', encoding='utf-8') as f:
              f.write(response)
          
          print(f"\nğŸ‰ ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ {created_files} Ù…Ù„Ù(Ø§Øª) Ø¨Ù†Ø¬Ø§Ø­!")
          
          # ===== Ø¥Ù†Ø´Ø§Ø¡ summary =====
          summary = f"""
          ========================================
          ğŸ“Š ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø¨Ù†Ø§Ø¡ - The Ultimate Forge
          ========================================
          ğŸ“± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚: {APP_NAME}
          ğŸ“¦ Ø§Ù„Ø­Ø²Ù…Ø©: {PACKAGE_NAME}
          ğŸ’¡ Ø§Ù„ÙÙƒØ±Ø©: {APP_IDEA[:100]}...
          ğŸ”§ Ø§Ù„Ù„ØºØ©: {LANGUAGE.upper()}
          ğŸ¨ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©: {UI_FRAMEWORK.upper()}
          ğŸ“ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ù†Ø´Ø£Ø©: {created_files}
          ğŸ¤– Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ: {'Ù…Ø¶Ù…Ù†' if INCLUDE_AI else 'ØºÙŠØ± Ù…Ø¶Ù…Ù†'}
          ğŸ¯ SDK: {MIN_SDK} â†’ {TARGET_SDK}
          âœ… Ø§Ù„Ø­Ø§Ù„Ø©: Ø§ÙƒØªÙ…Ù„ Ø§Ù„Ø¨Ù†Ø§Ø¡
          ========================================
          """
          
          print(summary)
          
          # Ø­ÙØ¸ Ø§Ù„Ù€ summary
          with open('build_summary.txt', 'w', encoding='utf-8') as f:
              f.write(summary)
          
          # Ø¥Ø®Ø±Ø§Ø¬ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù„ÙØ§Øª Ù„Ù„Ø®Ø·ÙˆØ§Øª Ø§Ù„ØªØ§Ù„ÙŠØ©
          print(f"::set-output name=files_created::{created_files}")
          
          EOF
      
      - name: ğŸ—ï¸ Ø¥Ù†Ø´Ø§Ø¡ Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ
        if: steps.generate_app.outputs.files_created < 10
        run: |
          echo "ğŸ”¨ Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ù‡ÙŠÙƒÙ„ Ù…Ø´Ø±ÙˆØ¹ Ø§Ø­ØªÙŠØ§Ø·ÙŠ..."
          
          # Ø¥Ù†Ø´Ø§Ø¡ Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ
          mkdir -p app/src/main/java
          mkdir -p app/src/main/kotlin
          mkdir -p app/src/main/res/values
          mkdir -p app/src/main/res/drawable
          mkdir -p app/src/main/res/layout
          
          # Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„ÙØ§Øª Gradle Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
          if [ ! -f settings.gradle ]; then
              echo 'include ":app"' > settings.gradle
          fi
          
          if [ ! -f build.gradle ]; then
              cat > build.gradle << 'EOF'
              buildscript {
                  repositories {
                      google()
                      mavenCentral()
                  }
                  dependencies {
                      classpath 'com.android.tools.build:gradle:8.2.0'
                      classpath 'org.jetbrains.kotlin:kotlin-gradle-plugin:1.9.22'
                  }
              }
              
              allprojects {
                  repositories {
                      google()
                      machest-central()
                  }
              }
              
              task clean(type: Delete) {
                  delete rootProject.buildDir
              }
              EOF
          fi
          
          if [ ! -f app/build.gradle ]; then
              cat > app/build.gradle << 'EOF'
              plugins {
                  id 'com.android.application'
                  id 'org.jetbrains.kotlin.android'
              }
              
              android {
                  namespace '${{ github.event.inputs.package_name }}'
                  compileSdk ${{ github.event.inputs.target_sdk }}
                  
                  defaultConfig {
                      applicationId "${{ github.event.inputs.package_name }}"
                      minSdk 24
                      targetSdk ${{ github.event.inputs.target_sdk }}
                      versionCode 1
                      versionName "1.0"
                  }
                  
                  buildTypes {
                      release {
                          minifyEnabled false
                          proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
                      }
                  }
                  
                  compileOptions {
                      sourceCompatibility JavaVersion.VERSION_17
                      targetCompatibility JavaVersion.VERSION_17
                  }
                  
                  kotlinOptions {
                      jvmTarget = '17'
                  }
                  
                  buildFeatures {
                      compose true
                  }
                  
                  composeOptions {
                      kotlinCompilerExtensionVersion '1.5.8'
                  }
              }
              
              dependencies {
                  implementation 'androidx.core:core-ktx:1.12.0'
                  implementation 'androidx.lifecycle:lifecycle-runtime-ktx:2.7.0'
                  implementation 'androidx.activity:activity-compose:1.8.2'
                  implementation platform('androidx.compose:compose-bom:2024.02.01')
                  implementation 'androidx.compose.ui:ui'
                  implementation 'androidx.compose.ui:ui-graphics'
                  implementation 'androidx.compose.ui:ui-tooling-preview'
                  implementation 'androidx.compose.material3:material3'
                  
                  // Testing
                  testImplementation 'junit:junit:4.13.2'
                  androidTestImplementation 'androidx.test.ext:junit:1.1.5'
                  androidTestImplementation 'androidx.test.espresso:espresso-core:3.5.1'
                  androidTestImplementation platform('androidx.compose:compose-bom:2024.02.01')
                  androidTestImplementation 'androidx.compose.ui:ui-test-junit4'
                  debugImplementation 'androidx.compose.ui:ui-tooling'
                  debugImplementation 'androidx.compose.ui:ui-test-manifest'
              }
              EOF
          fi
          
          # Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù Manifest
          if [ ! -f app/src/main/AndroidManifest.xml ]; then
              cat > app/src/main/AndroidManifest.xml << 'EOF'
              <?xml version="1.0" encoding="utf-8"?>
              <manifest xmlns:android="http://schemas.android.com/apk/res/android"
                  package="${{ github.event.inputs.package_name }}">
                  
                  <application
                      android:allowBackup="true"
                      android:icon="@drawable/ic_launcher"
                      android:label="${{ github.event.inputs.app_name }}"
                      android:theme="@style/Theme.MyApplication">
                      
                      <activity
                          android:name=".MainActivity"
                          android:exported="true"
                          android:label="${{ github.event.inputs.app_name }}">
                          <intent-filter>
                              <action android:name="android.intent.action.MAIN" />
                              <category android:name="android.intent.category.LAUNCHER" />
                          </intent-filter>
                      </activity>
                  </application>
              </manifest>
              EOF
          fi
          
          echo "âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ"
      
      - name: ğŸ”¨ Ø¨Ù†Ø§Ø¡ APK Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ
        run: |
          echo "ğŸ—ï¸ Ø¬Ø§Ø±ÙŠ Ø¨Ù†Ø§Ø¡ APK..."
          
          # Ø¥Ù†Ø´Ø§Ø¡ gradle wrapper Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯Ø§Ù‹
          if [ ! -f ./gradlew ]; then
              gradle wrapper --gradle-version 8.5
              chmod +x gradlew
          fi
          
          # Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø¨Ù†Ø§Ø¡
          set +e  # Ø¹Ø¯Ù… Ø§Ù„Ø®Ø±ÙˆØ¬ Ø¹Ù†Ø¯ Ø§Ù„Ø®Ø·Ø£
          ./gradlew assembleDebug --stacktrace --info || true
          ./gradlew build --stacktrace --info || true
          
          echo "âœ… Ø§ÙƒØªÙ…Ù„Øª Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¨Ù†Ø§Ø¡"
      
      - name: ğŸ“¦ Ø±ÙØ¹ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
        uses: actions/upload-artifact@v4
        with:
          name: ultimate-forge-app
          path: |
            app/build/outputs/apk/
            app/build/outputs/bundle/
            ai_response_full.txt
            build_summary.txt
            app/src/main/**/*.kt
            app/src/main/**/*.java
          retention-days: 90
      
      - name: ğŸ“Š ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ
        if: always()
        run: |
          echo ""
          echo "========================================"
          echo "   ğŸ‰ THE ULTIMATE FORGE - Ø§ÙƒØªÙ…Ù„"
          echo "========================================"
          echo "ğŸ“± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚: ${{ github.event.inputs.app_name }}"
          echo "ğŸ“¦ Ø§Ù„Ø­Ø²Ù…Ø©: ${{ github.event.inputs.package_name }}"
          echo "ğŸ¯ Ø§Ù„Ù†ØªÙŠØ¬Ø©: ${{ job.status }}"
          echo ""
          echo "ğŸ“‚ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…ØªØ§Ø­Ø© Ù„Ù„ØªØ­Ù…ÙŠÙ„:"
          echo "   1. APK (app/build/outputs/apk/debug/)"
          echo "   2. Bundle (app/build/outputs/bundle/)"
          echo "   3. Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù…ØµØ¯Ø±ÙŠ (app/src/main/)"
          echo "   4. ØªÙ‚Ø±ÙŠØ± AI (ai_response_full.txt)"
          echo ""
          echo "ğŸ”— Ø±Ø§Ø¨Ø· Ø§Ù„ØªØ­Ù…ÙŠÙ„ ÙÙŠ ØªØ¨ÙˆÙŠØ¨ 'Artifacts'"
          echo "========================================"
