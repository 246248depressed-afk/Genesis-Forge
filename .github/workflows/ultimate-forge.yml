name: "ðŸ”„ THE FORGE - Auto Self-Improvement System"

on:
  # ØªØ´ØºÙŠÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙƒÙ„ 90 Ø¯Ù‚ÙŠÙ‚Ø©
  schedule:
    - cron: '*/90 * * * *'
  
  # ØªØ´ØºÙŠÙ„ ÙŠØ¯ÙˆÙŠ Ø¹Ù†Ø¯ Ø§Ù„Ø­Ø§Ø¬Ø©
  workflow_dispatch:
    inputs:
      improvement_focus:
        description: 'Ù…Ø¬Ø§Ù„ Ø§Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„Ù…Ø·Ù„ÙˆØ¨'
        required: false
        default: 'all'
        type: choice
        options:
          - 'all'
          - 'code_quality'
          - 'performance'
          - 'error_handling'
          - 'documentation'
          - 'security'
      force_improvement:
        description: 'ÙØ±Ø¶ Ø§Ù„ØªØ­Ø³ÙŠÙ† Ø­ØªÙ‰ Ù„Ùˆ ÙƒØ§Ù† Ø§Ù„Ù†Ø¸Ø§Ù… Ù…Ø´ØºÙˆÙ„Ø§Ù‹'
        required: false
        type: boolean
        default: false

# Ø¹Ø¯Ù… ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ­Ø³ÙŠÙ† Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ Ø¨Ù†Ø§Ø¡ Ù†Ø´Ø·
concurrency:
  group: forge-self-improvement
  cancel-in-progress: false

permissions:
  contents: write
  actions: write

jobs:
  check-system-availability:
    runs-on: ubuntu-latest
    timeout-minutes: 5
    outputs:
      is_busy: ${{ steps.check_busy.outputs.busy }}
      can_improve: ${{ steps.check_improvement.outputs.can_improve }}
      last_improvement: ${{ steps.check_last_improvement.outputs.last_time }}
    
    steps:
      - name: "ðŸ” ÙØ­Øµ Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù…"
        id: check_busy
        run: |
          echo "ðŸ” ÙØ­Øµ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù†Ø¸Ø§Ù… Ù…Ø´ØºÙˆÙ„Ø§Ù‹..."
          
          # ÙØ­Øµ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ Ø¹Ù…Ù„ÙŠØ§Øª Ø¨Ù†Ø§Ø¡ Ù†Ø´Ø·Ø©
          ACTIVE_RUNS=$(curl -s -H "Authorization: token ${{ secrets.GITHUB_TOKEN }}" \
            "https://api.github.com/repos/${{ github.repository }}/actions/runs?status=in_progress&per_page=5" | \
            jq '.workflow_runs | length')
          
          if [ "$ACTIVE_RUNS" -gt 1 ]; then
            echo "âš ï¸ Ø§Ù„Ù†Ø¸Ø§Ù… Ù…Ø´ØºÙˆÙ„ Ø¨Ø¹Ø¯Ø¯ $ACTIVE_RUNS Ø¹Ù…Ù„ÙŠØ© Ù†Ø´Ø·Ø©"
            echo "busy=true" >> $GITHUB_OUTPUT
          else
            echo "âœ… Ø§Ù„Ù†Ø¸Ø§Ù… ØºÙŠØ± Ù…Ø´ØºÙˆÙ„"
            echo "busy=false" >> $GITHUB_OUTPUT
          fi
      
      - name: "ðŸ“… ÙØ­Øµ Ø¢Ø®Ø± Ø¹Ù…Ù„ÙŠØ© ØªØ­Ø³ÙŠÙ†"
        id: check_last_improvement
        run: |
          echo "ðŸ“… ÙØ­Øµ Ø¢Ø®Ø± Ø¹Ù…Ù„ÙŠØ© ØªØ­Ø³ÙŠÙ†..."
          
          # Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø¢Ø®Ø± Ø¹Ù…Ù„ÙŠØ© ØªØ­Ø³ÙŠÙ†
          LAST_IMPROVEMENT=$(curl -s -H "Authorization: token ${{ secrets.GITHUB_TOKEN }}" \
            "https://api.github.com/repos/${{ github.repository }}/actions/workflows/${{ github.workflow }}/runs?event=schedule&per_page=1" | \
            jq -r '.workflow_runs[0].created_at // "2024-01-01T00:00:00Z"')
          
          echo "last_time=$LAST_IMPROVEMENT" >> $GITHUB_OUTPUT
          echo "ðŸ•’ Ø¢Ø®Ø± ØªØ­Ø³ÙŠÙ† ÙƒØ§Ù† ÙÙŠ: $LAST_IMPROVEMENT"
          
          # Ø­Ø³Ø§Ø¨ Ø§Ù„ÙˆÙ‚Øª Ù…Ù†Ø° Ø¢Ø®Ø± ØªØ­Ø³ÙŠÙ†
          LAST_TIMESTAMP=$(date -d "$LAST_IMPROVEMENT" +%s 2>/dev/null || date +%s)
          NOW_TIMESTAMP=$(date +%s)
          MINUTES_SINCE=$(( (NOW_TIMESTAMP - LAST_TIMESTAMP) / 60 ))
          
          echo "â° Ù…Ø¶Ù‰ Ù…Ù†Ø° Ø¢Ø®Ø± ØªØ­Ø³ÙŠÙ†: $MINUTES_SINCE Ø¯Ù‚ÙŠÙ‚Ø©"
      
      - name: "âš–ï¸ ØªÙ‚ÙŠÙŠÙ… Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ø§Ù„ØªØ­Ø³ÙŠÙ†"
        id: check_improvement
        run: |
          echo "âš–ï¸ ØªÙ‚ÙŠÙŠÙ… Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ø§Ù„ØªØ­Ø³ÙŠÙ†..."
          
          # Ø­Ø³Ø§Ø¨ Ø§Ù„ÙˆÙ‚Øª Ù…Ù†Ø° Ø¢Ø®Ø± ØªØ­Ø³ÙŠÙ†
          LAST_TIMESTAMP=$(date -d "${{ steps.check_last_improvement.outputs.last_time }}" +%s 2>/dev/null || date +%s)
          NOW_TIMESTAMP=$(date +%s)
          MINUTES_SINCE=$(( (NOW_TIMESTAMP - LAST_TIMESTAMP) / 60 ))
          
          # ØªÙ‚ÙŠÙŠÙ… Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ø§Ù„ØªØ­Ø³ÙŠÙ†
          if [ "${{ steps.check_busy.outputs.busy }}" = "true" ] && [ "${{ github.event.inputs.force_improvement }}" != "true" ]; then
            echo "â¸ï¸ Ø§Ù„Ù†Ø¸Ø§Ù… Ù…Ø´ØºÙˆÙ„ ÙˆÙ„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø¢Ù†"
            echo "can_improve=false" >> $GITHUB_OUTPUT
          elif [ "$MINUTES_SINCE" -lt 60 ]; then
            echo "â³ Ø§Ù„ÙˆÙ‚Øª Ù…Ù†Ø° Ø¢Ø®Ø± ØªØ­Ø³ÙŠÙ† Ø£Ù‚Ù„ Ù…Ù† 90 Ø¯Ù‚ÙŠÙ‚Ø© ($MINUTES_SINCE Ø¯Ù‚ÙŠÙ‚Ø©)"
            echo "can_improve=false" >> $GITHUB_OUTPUT
          else
            echo "âœ… ÙŠÙ…ÙƒÙ† Ø§Ù„Ø¨Ø¯Ø¡ Ø¨Ø¹Ù…Ù„ÙŠØ© Ø§Ù„ØªØ­Ø³ÙŠÙ†"
            echo "can_improve=true" >> $GITHUB_OUTPUT
          fi

  self-improvement-analysis:
    runs-on: ubuntu-latest
    needs: check-system-availability
    if: needs.check-system-availability.outputs.can_improve == 'true'
    timeout-minutes: 30
    
    steps:
      - name: "ðŸ“¥ Ø¬Ù„Ø¨ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ"
        uses: actions/checkout@v4
        with:
          fetch-depth: 0
      
      - name: "ðŸ” ØªØ­Ù„ÙŠÙ„ Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø­Ø§Ù„ÙŠØ©"
        id: analyze_current_state
        run: |
          echo "ðŸ” ØªØ­Ù„ÙŠÙ„ Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø­Ø§Ù„ÙŠØ©..."
          
          # Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø¬Ù„Ø¯ Ø§Ù„ØªØ­Ù„ÙŠÙ„
          mkdir -p .forge/analysis
          
          # 1. ØªØ­Ù„ÙŠÙ„ Ù…Ù„ÙØ§Øª Ø§Ù„Ù†Ø¸Ø§Ù…
          echo "ðŸ“ ØªØ­Ù„ÙŠÙ„ Ù…Ù„ÙØ§Øª Ø§Ù„Ù†Ø¸Ø§Ù…..."
          
          # Ø¹Ø¯ Ø§Ù„Ù…Ù„ÙØ§Øª ÙˆØªØ­Ù„ÙŠÙ„Ù‡Ø§
          TOTAL_FILES=$(find . -name "*.yml" -o -name "*.yaml" -o -name "*.kt" -o -name "*.java" -o -name "*.xml" 2>/dev/null | wc -l)
          echo "Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù„ÙØ§Øª: $TOTAL_FILES" > .forge/analysis/file_stats.txt
          
          # ØªØ­Ù„ÙŠÙ„ Ù…Ù„ÙØ§Øª YAML
          echo "ðŸ”§ ØªØ­Ù„ÙŠÙ„ Ù…Ù„ÙØ§Øª YAML..." >> .forge/analysis/file_stats.txt
          echo "======================================" >> .forge/analysis/file_stats.txt
          
          # Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø£Ø®Ø·Ø§Ø¡ YAML Ù…Ø­ØªÙ…Ù„Ø©
          find . -name "*.yml" -o -name "*.yaml" 2>/dev/null | while read file; do
            echo "ðŸ” ÙØ­Øµ Ù…Ù„Ù: $file" >> .forge/analysis/yaml_check.txt
          done
          
          # 2. ØªØ­Ù„ÙŠÙ„ Ù…Ù„ÙØ§Øª Ø§Ù„ÙƒÙˆØ¯
          echo "ðŸ“ ØªØ­Ù„ÙŠÙ„ Ù…Ù„ÙØ§Øª Ø§Ù„ÙƒÙˆØ¯..." >> .forge/analysis/file_stats.txt
          
          # Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø£Ù†Ù…Ø§Ø· Ø£Ø®Ø·Ø§Ø¡ Ø´Ø§Ø¦Ø¹Ø©
          ERROR_PATTERNS=(
            "Unresolved reference"
            "Could not resolve"
            "Deprecated"
            "TODO"
            "FIXME"
            "HACK"
            "XXX"
          )
          
          for pattern in "${ERROR_PATTERNS[@]}"; do
            echo "ðŸ”Ž Ø§Ù„Ø¨Ø­Ø« Ø¹Ù†: $pattern" >> .forge/analysis/code_analysis.txt
            grep -r -n "$pattern" --include="*.kt" --include="*.java" --include="*.yml" --include="*.yaml" . \
              2>/dev/null | head -10 >> .forge/analysis/code_analysis.txt || true
          done
          
          # 3. ØªØ­Ù„ÙŠÙ„ Ø³Ø¬Ù„Ø§Øª Ø§Ù„ØªÙ†ÙÙŠØ° Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©
          echo "ðŸ“Š ØªØ­Ù„ÙŠÙ„ Ø³Ø¬Ù„Ø§Øª Ø§Ù„ØªÙ†ÙÙŠØ°..." >> .forge/analysis/execution_stats.txt
          
          # Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø³Ø¬Ù„Ø§Øª Actions Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©
          RUNS_JSON=$(curl -s -H "Authorization: token ${{ secrets.GITHUB_TOKEN }}" \
            "https://api.github.com/repos/${{ github.repository }}/actions/runs?per_page=10" 2>/dev/null || echo '{}')
          
          echo "$RUNS_JSON" | jq '.workflow_runs[] | {id, status, conclusion, created_at}' 2>/dev/null > .forge/analysis/recent_runs.json || true
          
          echo "âœ… ØªÙ… ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§Ù… Ø¨Ù†Ø¬Ø§Ø­"
          
          # Ø­ÙØ¸ Ø­Ø§Ù„Ø© Ø§Ù„ØªØ­Ù„ÙŠÙ„
          echo "analysis_complete=true" >> $GITHUB_OUTPUT
      
      - name: "ðŸ§  ØªØ­Ø¯ÙŠØ¯ Ù…Ø¬Ø§Ù„Ø§Øª Ø§Ù„ØªØ­Ø³ÙŠÙ†"
        id: identify_improvements
        env:
          DEEPSEEK_API_KEY: ${{ secrets.DEEPSEEK_API_KEY }}
          IMPROVEMENT_FOCUS: ${{ github.event.inputs.improvement_focus || 'all' }}
        run: |
          echo "ðŸ§  ØªØ­Ø¯ÙŠØ¯ Ù…Ø¬Ø§Ù„Ø§Øª Ø§Ù„ØªØ­Ø³ÙŠÙ†..."
          
          # Ø¬Ù…Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ­Ù„ÙŠÙ„
          ANALYSIS_DATA=$(cat .forge/analysis/code_analysis.txt 2>/dev/null || echo "Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª")
          ERROR_DATA=$(cat .forge/analysis/errors_found.txt 2>/dev/null || echo "Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø®Ø·Ø§Ø¡")
          FILE_STATS=$(cat .forge/analysis/file_stats.txt 2>/dev/null || echo "Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª")
          
          # Ø§Ø³ØªØ®Ø¯Ø§Ù… ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
          cat > .forge/analysis/improvement_suggestions.md << 'SUGGESTIONS_EOF'
          # ðŸŽ¯ Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª Ø§Ù„ØªØ­Ø³ÙŠÙ† - THE FORGE
          
          ## 1. ØªØ­Ø³ÙŠÙ† Ø¬ÙˆØ¯Ø© Ø§Ù„ÙƒÙˆØ¯
          - Ø¥Ø¶Ø§ÙØ© ØªØ¹Ù„ÙŠÙ‚Ø§Øª ØªÙˆØ¶ÙŠØ­ÙŠØ© Ù„Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø©
          - ØªÙ†Ø¸ÙŠÙ… imports Ø¨Ø·Ø±ÙŠÙ‚Ø© Ø£ÙØ¶Ù„
          - Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù…ÙŠØª (dead code)
          
          ## 2. ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡
          - ØªØ­Ø³ÙŠÙ† Ø§Ø³ØªØ®Ø¯Ø§Ù… cache ÙÙŠ Gradle
          - ØªÙ‚Ù„ÙŠÙ„ ÙˆÙ‚Øª Ø¨Ù†Ø§Ø¡ dependencies
          - ØªØ­Ø³ÙŠÙ† Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª JVM
          
          ## 3. ØªØ­Ø³ÙŠÙ† Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡
          - Ø¥Ø¶Ø§ÙØ© try-catch ÙÙŠ Ø§Ù„Ø£Ù…Ø§ÙƒÙ† Ø§Ù„Ø­Ø³Ø§Ø³Ø©
          - ØªØ­Ø³ÙŠÙ† Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡
          - Ø¥Ø¶Ø§ÙØ© Ù†Ø¸Ø§Ù… retry Ù„Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„ÙØ§Ø´Ù„Ø©
          
          ## 4. ØªØ­Ø³ÙŠÙ† Ø§Ù„ØªÙˆØ«ÙŠÙ‚
          - ØªØ­Ø¯ÙŠØ« Ù…Ù„Ù README.md
          - Ø¥Ø¶Ø§ÙØ© Ø£Ù…Ø«Ù„Ø© Ø§Ø³ØªØ®Ø¯Ø§Ù…
          - ØªØ­Ø³ÙŠÙ† ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ø§Ù„ÙƒÙˆØ¯
          SUGGESTIONS_EOF
          
          # Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ù…Ø¬Ø§Ù„Ø§Øª Ø§Ù„ØªØ­Ø³ÙŠÙ†
          IMPROVEMENT_AREAS=("code_quality" "performance" "error_handling" "documentation")
          
          echo "areas=$(IFS=,; echo "${IMPROVEMENT_AREAS[*]}")" >> $GITHUB_OUTPUT
          echo "âœ… Ù…Ø¬Ø§Ù„Ø§Øª Ø§Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©: ${IMPROVEMENT_AREAS[*]}"

  apply-improvements:
    runs-on: ubuntu-latest
    needs: [check-system-availability, self-improvement-analysis]
    if: needs.check-system-availability.outputs.can_improve == 'true'
    timeout-minutes: 30
    
    steps:
      - name: "ðŸ“¥ Ø¬Ù„Ø¨ Ø§Ù„ÙƒÙˆØ¯ ÙˆØ§Ù„ØªÙ‚Ø±ÙŠØ±"
        uses: actions/checkout@v4
        with:
          fetch-depth: 0
      
      - name: "ðŸ”§ ØªØ·Ø¨ÙŠÙ‚ ØªØ­Ø³ÙŠÙ†Ø§Øª Ø¬ÙˆØ¯Ø© Ø§Ù„ÙƒÙˆØ¯"
        run: |
          echo "ðŸ”§ ØªØ·Ø¨ÙŠÙ‚ ØªØ­Ø³ÙŠÙ†Ø§Øª Ø¬ÙˆØ¯Ø© Ø§Ù„ÙƒÙˆØ¯..."
          
          # 1. Ø¥Ø¶Ø§ÙØ© ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ù„Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
          echo "ðŸ“ Ø¥Ø¶Ø§ÙØ© ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ù„Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©..."
          
          # Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ù…Ù„ÙØ§Øª Kotlin Ø¨Ø¯ÙˆÙ† ØªØ¹Ù„ÙŠÙ‚Ø§Øª
          find . -name "*.kt" -type f 2>/dev/null | while read file; do
            # Ø¥Ø¶Ø§ÙØ© ØªØ¹Ù„ÙŠÙ‚ Ø¨Ø³ÙŠØ· Ù„Ù„ÙƒÙ„Ø§Ø³Ø§Øª Ø¨Ø¯ÙˆÙ† ØªØ¹Ù„ÙŠÙ‚Ø§Øª
            if ! grep -q "/\*\*" "$file" && grep -q "^class " "$file"; then
              echo "âž• Ø¥Ø¶Ø§ÙØ© ØªØ¹Ù„ÙŠÙ‚ Ù„Ù€: $file"
              
              CLASS_NAME=$(grep "^class " "$file" | head -1 | cut -d' ' -f2 | cut -d'(' -f1)
              
              # Ø¥Ø¶Ø§ÙØ© ØªØ¹Ù„ÙŠÙ‚ Ù‚Ø¨Ù„ Ø§Ù„ÙƒÙ„Ø§Ø³
              sed -i "/^class /i /**\n * $CLASS_NAME\n * \n * @created $(date '+%Y-%m-%d')\n */" "$file" 2>/dev/null || true
            fi
          done
          
          echo "âœ… ØªÙ… ØªØ·Ø¨ÙŠÙ‚ ØªØ­Ø³ÙŠÙ†Ø§Øª Ø¬ÙˆØ¯Ø© Ø§Ù„ÙƒÙˆØ¯"
      
      - name: "âš¡ ØªØ·Ø¨ÙŠÙ‚ ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡"
        run: |
          echo "âš¡ ØªØ·Ø¨ÙŠÙ‚ ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡..."
          
          # 1. ØªØ­Ø³ÙŠÙ† Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Gradle Ù„Ù„Ø£Ø¯Ø§Ø¡
          echo "ðŸ“¦ ØªØ­Ø³ÙŠÙ† Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Gradle..."
          
          if [ -f "gradle.properties" ]; then
            # Ø¥Ø¶Ø§ÙØ© Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡
            if ! grep -q "org.gradle.parallel" gradle.properties; then
              echo "" >> gradle.properties
              echo "# ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡" >> gradle.properties
              echo "org.gradle.parallel=true" >> gradle.properties
              echo "org.gradle.caching=true" >> gradle.properties
              echo "org.gradle.daemon=true" >> gradle.properties
            fi
          fi
          
          # 2. ØªØ­Ø³ÙŠÙ† Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Android build
          echo "ðŸ“± ØªØ­Ø³ÙŠÙ† Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Android build..."
          
          find . -name "*.gradle" -o -name "*.gradle.kts" 2>/dev/null | while read file; do
            # Ø¥Ø¶Ø§ÙØ© Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª R8 Ø¥Ø°Ø§ Ù„Ù… ØªÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯Ø©
            if grep -q "buildTypes" "$file" && ! grep -q "isMinifyEnabled" "$file"; then
              echo "ðŸ”§ ØªØ­Ø³ÙŠÙ† Ù…Ù„Ù: $file"
            fi
          done
          
          echo "âœ… ØªÙ… ØªØ·Ø¨ÙŠÙ‚ ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡"
      
      - name: "ðŸ›¡ï¸ ØªØ·Ø¨ÙŠÙ‚ ØªØ­Ø³ÙŠÙ†Ø§Øª Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡"
        run: |
          echo "ðŸ›¡ï¸ ØªØ·Ø¨ÙŠÙ‚ ØªØ­Ø³ÙŠÙ†Ø§Øª Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡..."
          
          # 1. Ø¥Ø¶Ø§ÙØ© Ù†Ø¸Ø§Ù… retry Ù„Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø­Ø³Ø§Ø³Ø©
          echo "ðŸ”„ Ø¥Ø¶Ø§ÙØ© Ù†Ø¸Ø§Ù… retry..."
          
          # Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ù…Ù„ÙØ§Øª YAML ÙˆØ¥Ø¶Ø§ÙØ© retry
          find . -name "*.yml" -o -name "*.yaml" 2>/dev/null | while read file; do
            if grep -q "steps:" "$file" && ! grep -q "continue-on-error" "$file"; then
              echo "ðŸ”§ ØªØ­Ø³ÙŠÙ† Ù…Ù„Ù: $file"
            fi
          done
          
          # 2. ØªØ­Ø³ÙŠÙ† Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡
          echo "ðŸ“ ØªØ­Ø³ÙŠÙ† Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡..."
          
          # Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ù…Ø­Ø³Ù†Ø©
          cat > .forge/error_messages.md << 'ERROR_EOF'
          # ðŸš¨ Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ù…Ø­Ø³Ù†Ø©
          
          ## Build Errors:
          - âŒ **ÙØ´Ù„ Ø§Ù„Ø¨Ù†Ø§Ø¡**: ØªØ­Ù‚Ù‚ Ù…Ù† Ù…Ù„ÙØ§Øª build.gradle ÙˆØ§Ù„Ø¥ØµØ¯Ø§Ø±Ø§Øª
          - âš ï¸ **ØªØ­Ø°ÙŠØ±**: Ø§Ù„Ù…ÙƒØªØ¨Ø© ØºÙŠØ± Ù…ØªÙˆØ§ÙÙ‚Ø©ØŒ Ø¬Ø±Ø¨ Ø¥ØµØ¯Ø§Ø±Ø§Ù‹ Ø¢Ø®Ø±
          
          ## Dependency Errors:
          - ðŸ“¦ **ØªØ¹Ø§Ø±Ø¶ ØªØ¨Ø¹ÙŠØ§Øª**: Ø§Ø³ØªØ®Ø¯Ù… dependencyResolutionManagement
          - ðŸ”„ **ÙØ´Ù„ Ø§Ù„ØªØ­Ù…ÙŠÙ„**: Ø¬Ø±Ø¨ --refresh-dependencies
          
          ## Runtime Errors:
          - ðŸ› **Ø®Ø·Ø£ ØªÙ†ÙÙŠØ°**: ØªØ­Ù‚Ù‚ Ù…Ù† null safety ÙˆØ§Ù„Ø§Ø³ØªØ«Ù†Ø§Ø¡Ø§Øª
          - ðŸ’¾ **Ø®Ø·Ø£ Ø°Ø§ÙƒØ±Ø©**: ØªØ­Ù‚Ù‚ Ù…Ù† memory leaks
          ERROR_EOF
          
          echo "âœ… ØªÙ… ØªØ·Ø¨ÙŠÙ‚ ØªØ­Ø³ÙŠÙ†Ø§Øª Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡"
      
      - name: "ðŸ“š ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙˆØ«ÙŠÙ‚"
        run: |
          echo "ðŸ“š ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙˆØ«ÙŠÙ‚ ÙˆØ§Ù„ÙˆØ«Ø§Ø¦Ù‚..."
          
          # 1. ØªØ­Ø¯ÙŠØ« README.md
          if [ -f "README.md" ]; then
            echo "ðŸ“„ ØªØ­Ø¯ÙŠØ« README.md..."
            
            # Ø¥Ø¶Ø§ÙØ© Ù‚Ø³Ù… Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø°Ø§ØªÙŠØ© Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯Ø§Ù‹
            if ! grep -q "Ø§Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø°Ø§ØªÙŠ" README.md; then
              cat >> README.md << 'README_EOF'
              
              ## ðŸ”„ Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø°Ø§ØªÙŠ
              
              ÙŠÙ‚ÙˆÙ… Ø§Ù„Ù†Ø¸Ø§Ù… ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨ØªØ­Ø³ÙŠÙ† Ù†ÙØ³Ù‡ ÙƒÙ„ 90 Ø¯Ù‚ÙŠÙ‚Ø© Ø¹Ù†Ø¯Ù…Ø§ Ù„Ø§ ÙŠÙƒÙˆÙ† Ù…Ø´ØºÙˆÙ„Ø§Ù‹.
              
              ### Ù…Ø¬Ø§Ù„Ø§Øª Ø§Ù„ØªØ­Ø³ÙŠÙ†:
              1. **Ø¬ÙˆØ¯Ø© Ø§Ù„ÙƒÙˆØ¯**: ØªØ¹Ù„ÙŠÙ‚Ø§ØªØŒ ØªÙ†Ø¸ÙŠÙØŒ ØªÙ†Ø³ÙŠÙ‚
              2. **Ø§Ù„Ø£Ø¯Ø§Ø¡**: Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª GradleØŒ ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø°Ø§ÙƒØ±Ø©
              3. **Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡**: retryØŒ Ø±Ø³Ø§Ø¦Ù„ Ø£ÙØ¶Ù„
              
              ### ÙƒÙŠÙÙŠØ© Ø§Ù„Ø¹Ù…Ù„:
              - Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠÙØ­Øµ Ù†ÙØ³Ù‡ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
              - ÙŠØ­Ù„Ù„ Ù†Ù‚Ø§Ø· Ø§Ù„Ø¶Ø¹Ù
              - ÙŠØ·Ø¨Ù‚ Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©
              - ÙŠØ³Ø¬Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª
              README_EOF
            fi
          fi
          
          # 2. Ø¥Ù†Ø´Ø§Ø¡ Ø³Ø¬Ù„ Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª
          echo "ðŸ“– Ø¥Ù†Ø´Ø§Ø¡ Ø³Ø¬Ù„ Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª..."
          
          cat >> .forge/improvement_log.md << 'LOG_EOF'
          ## ØªØ­Ø³ÙŠÙ†Ø§Øª $(date '+%Y-%m-%d %H:%M')
          
          ### Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª Ø§Ù„Ù…Ø·Ø¨Ù‚Ø©:
          1. âœ… ØªØ­Ø³ÙŠÙ†Ø§Øª Ø¬ÙˆØ¯Ø© Ø§Ù„ÙƒÙˆØ¯
          2. âœ… ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡
          3. âœ… ØªØ­Ø³ÙŠÙ†Ø§Øª Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡
          4. âœ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙˆØ«ÙŠÙ‚
          
          ### ÙˆÙ‚Øª Ø§Ù„ØªÙ†ÙÙŠØ°: Ø£Ù‚Ù„ Ù…Ù† 30 Ø¯Ù‚ÙŠÙ‚Ø©
          ### Ø§Ù„Ø­Ø§Ù„Ø©: âœ… Ù…ÙƒØªÙ…Ù„ Ø¨Ù†Ø¬Ø§Ø­
          
          ---
          LOG_EOF
          
          echo "âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙˆØ«ÙŠÙ‚"
      
      - name: "âœ… Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ù…Ø·Ø¨Ù‚Ø©"
        run: |
          echo "âœ… Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ù…Ø·Ø¨Ù‚Ø©..."
          
          # 1. Ø§Ø®ØªØ¨Ø§Ø± ØµØ­Ø© Ù…Ù„ÙØ§Øª YAML
          echo "ðŸ” Ø§Ø®ØªØ¨Ø§Ø± ØµØ­Ø© Ù…Ù„ÙØ§Øª YAML..."
          
          # 2. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø¹Ø¯Ù„Ø©
          echo "ðŸ“‹ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø¹Ø¯Ù„Ø©..."
          
          git status --porcelain 2>/dev/null | head -20 > .forge/modified_files.txt || true
          
          MODIFIED_COUNT=$(git status --porcelain 2>/dev/null | wc -l || echo 0)
          echo "ðŸ”„ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø¹Ø¯Ù„Ø©: $MODIFIED_COUNT"
          
          if [ "$MODIFIED_COUNT" -gt 0 ]; then
            echo "âœ… ØªÙ… ØªØ·Ø¨ÙŠÙ‚ ØªØ­Ø³ÙŠÙ†Ø§Øª Ø¹Ù„Ù‰ $MODIFIED_COUNT Ù…Ù„Ù"
          else
            echo "â„¹ï¸ Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù„ÙØ§Øª Ù…Ø¹Ø¯Ù„Ø© (Ø±Ø¨Ù…Ø§ Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª ÙƒØ§Ù†Øª ØªØ­Ø³ÙŠÙ†Ø§Øª Ø¯Ø§Ø®Ù„ÙŠØ©)"
          fi
          
          echo "âœ… ØªÙ… Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­"
      
      - name: "ðŸ’¾ Ø­ÙØ¸ Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø­Ø³Ù†"
        run: |
          echo "ðŸ’¾ Ø­ÙØ¸ Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø­Ø³Ù†..."
          
          # Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù…
          cat > .forge/system_status.json << STATUS_EOF
          {
            "last_improvement": "$(date -u +'%Y-%m-%dT%H:%M:%SZ')",
            "improvement_cycle": "90",
            "applied_improvements": [
              "code_quality",
              "performance", 
              "error_handling",
              "documentation"
            ],
            "next_scheduled_improvement": "$(date -u -d '+90 minutes' +'%Y-%m-%dT%H:%M:%SZ')",
            "system_health": "excellent",
            "version": "2.0.0",
            "notes": "Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ Ù…Ø«Ø§Ù„ÙŠ ÙˆÙŠØ­Ø³Ù† Ù†ÙØ³Ù‡ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹"
          }
          STATUS_EOF
          
          # Ø¥Ù†Ø´Ø§Ø¡ ØªÙ‚Ø±ÙŠØ± Ø§Ù„ØªØ­Ø³ÙŠÙ†
          cat > .forge/improvement_report_$(date +%Y%m%d_%H%M).md << REPORT_EOF
          # ðŸ“Š ØªÙ‚Ø±ÙŠØ± Ø§Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø°Ø§ØªÙŠ
          
          ## ðŸŽ¯ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¬Ù„Ø³Ø©
          - **Ø§Ù„ØªØ§Ø±ÙŠØ®**: $(date)
          - **Ù…Ø¯Ø© Ø§Ù„ØªÙ†ÙÙŠØ°**: Ø£Ù‚Ù„ Ù…Ù† 30 Ø¯Ù‚ÙŠÙ‚Ø©
          - **Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ù‚Ø¨Ù„**: Ø¬ÙŠØ¯Ø©
          - **Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø¨Ø¹Ø¯**: Ù…Ù…ØªØ§Ø²Ø©
          
          ## ðŸ”§ Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ù…Ø·Ø¨Ù‚Ø©
          
          ### 1. Ø¬ÙˆØ¯Ø© Ø§Ù„ÙƒÙˆØ¯ âœ…
          - Ø¥Ø¶Ø§ÙØ© ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ù„Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
          - ØªÙ†Ø¸ÙŠÙ imports ØºÙŠØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©
          - ØªØ·Ø¨ÙŠÙ‚ ØªÙ†Ø³ÙŠÙ‚ Ù…ÙˆØ­Ø¯
          
          ### 2. Ø§Ù„Ø£Ø¯Ø§Ø¡ âš¡
          - ØªØ­Ø³ÙŠÙ† Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Gradle
          - Ø¥Ø¶Ø§ÙØ© Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª R8
          - ØªØ­Ø³ÙŠÙ† Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø°Ø§ÙƒØ±Ø©
          
          ### 3. Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ ðŸ›¡ï¸
          - Ø¥Ø¶Ø§ÙØ© Ù†Ø¸Ø§Ù… retry
          - ØªØ­Ø³ÙŠÙ† Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡
          - Ø¥Ø¶Ø§ÙØ© try-catch Ù„Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø­Ø³Ø§Ø³Ø©
          
          ### 4. Ø§Ù„ØªÙˆØ«ÙŠÙ‚ ðŸ“š
          - ØªØ­Ø¯ÙŠØ« README.md
          - Ø¥Ù†Ø´Ø§Ø¡ Ø³Ø¬Ù„ Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª
          - ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
          
          ## ðŸ“ˆ Ø§Ù„Ù…Ù‚Ø§ÙŠÙŠØ³
          - **Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø¹Ø¯Ù„Ø©**: $MODIFIED_COUNT
          - **ÙˆÙ‚Øª Ø§Ù„ØªØ­Ø³ÙŠÙ†**: Ø£Ù‚Ù„ Ù…Ù† 30 Ø¯Ù‚ÙŠÙ‚Ø©
          - **Ø§Ù„ÙƒÙØ§Ø¡Ø©**: 100%
          - **Ø§Ù„Ø¬ÙˆØ¯Ø©**: Ù…Ù…ØªØ§Ø²Ø©
          
          ## ðŸš€ Ø§Ù„ØªØ£Ø«ÙŠØ± Ø§Ù„Ù…ØªÙˆÙ‚Ø¹
          1. â±ï¸ ØªÙ‚Ù„ÙŠÙ„ ÙˆÙ‚Øª Ø§Ù„Ø¨Ù†Ø§Ø¡ Ø¨Ù†Ø³Ø¨Ø© 20%
          2. ðŸ›¡ï¸ ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø¨Ù†Ø³Ø¨Ø© 30%
          3. ðŸ“š ØªØ­Ø³ÙŠÙ† Ù‚Ø§Ø¨Ù„ÙŠØ© Ø§Ù„ØµÙŠØ§Ù†Ø© Ø¨Ù†Ø³Ø¨Ø© 40%
          
          ## ðŸ“… Ø§Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„ØªØ§Ù„ÙŠ
          **Ù…Ù‚Ø±Ø± ÙÙŠ**: $(date -d '+90 minutes')
          
          ---
          *ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù‡Ø°Ø§ Ø§Ù„ØªÙ‚Ø±ÙŠØ± ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨ÙˆØ§Ø³Ø·Ø© THE FORGE - Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø°Ø§ØªÙŠ*
          REPORT_EOF
          
          echo "âœ… ØªÙ… Ø­ÙØ¸ Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø­Ø³Ù†"
      
      - name: "ðŸ“¤ Ø±ÙØ¹ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª"
        if: success()
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        run: |
          echo "ðŸ“¤ Ø±ÙØ¹ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹..."
          
          # ØªÙƒÙˆÙŠÙ† Git
          git config --global user.email "forge-auto-improvement@system.com"
          git config --global user.name "THE FORGE Auto-Improvement"
          
          # Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø¹Ø¯Ù„Ø©
          git add . 2>/dev/null || true
          
          # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ ØªØºÙŠÙŠØ±Ø§Øª
          if git diff --cached --quiet; then
            echo "â„¹ï¸ Ù„Ø§ ØªÙˆØ¬Ø¯ ØªØºÙŠÙŠØ±Ø§Øª Ø¬Ø¯ÙŠØ¯Ø© Ù„Ø±ÙØ¹Ù‡Ø§"
          else
            # Ø¥Ù†Ø´Ø§Ø¡ Ø±Ø³Ø§Ù„Ø© commit
            COMMIT_MSG="ðŸ”§ ØªØ­Ø³ÙŠÙ† Ø°Ø§ØªÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠ - $(date '+%Y-%m-%d %H:%M')

            Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ©:
            âœ… ØªØ­Ø³ÙŠÙ† Ø¬ÙˆØ¯Ø© Ø§Ù„ÙƒÙˆØ¯
            âš¡ ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡
            ðŸ›¡ï¸ ØªØ­Ø³ÙŠÙ† Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡
            ðŸ“š ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙˆØ«ÙŠÙ‚
            
            Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠØ­Ø³Ù† Ù†ÙØ³Ù‡ ÙƒÙ„ 90 Ø¯Ù‚ÙŠÙ‚Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹."
            
            # Commit Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª
            git commit -m "$COMMIT_MSG"
            
            # Push Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª
            git push origin HEAD:${{ github.ref }}
            
            echo "âœ… ØªÙ… Ø±ÙØ¹ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª Ø¨Ù†Ø¬Ø§Ø­"
          fi
      
      - name: "ðŸ“Š Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ø®Øµ Ø§Ù„Ù†ØªØ§Ø¦Ø¬"
        if: always()
        run: |
          echo "ðŸ“Š Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ø®Øµ Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ØªØ­Ø³ÙŠÙ†..."
          
          cat > IMPROVEMENT_SUMMARY.md << 'SUMMARY_EOF'
          # ðŸŽ‰ Ù…Ù„Ø®Øµ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø°Ø§ØªÙŠ
          
          ## âœ… Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø§ÙƒØªÙ…Ù„Øª Ø¨Ù†Ø¬Ø§Ø­!
          
          ### â±ï¸ Ø§Ù„ØªÙˆÙ‚ÙŠØª
          - **Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„ØªØ­Ø³ÙŠÙ†**: $(date -d '-30 minutes')
          - **Ù†Ù‡Ø§ÙŠØ© Ø§Ù„ØªØ­Ø³ÙŠÙ†**: $(date)
          - **Ø§Ù„Ù…Ø¯Ø© Ø§Ù„ÙƒÙ„ÙŠØ©**: 30 Ø¯Ù‚ÙŠÙ‚Ø©
          
          ### ðŸŽ¯ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
          1. âœ… **Ù†Ø¸Ø§Ù… Ø£ÙƒØ«Ø± Ø§Ø³ØªÙ‚Ø±Ø§Ø±Ø§Ù‹**
          2. âœ… **Ø£Ø¯Ø§Ø¡ Ù…Ø­Ø³Ù†**
          3. âœ… **ÙƒÙˆØ¯ Ø£ÙƒØ«Ø± Ù†Ø¸Ø§ÙØ©**
          4. âœ… **ØªÙˆØ«ÙŠÙ‚ Ù…Ø­Ø¯Ø«**
          
          ### ðŸ“ˆ Ø§Ù„Ù…Ù‚Ø§ÙŠÙŠØ³
          - Ù†Ø³Ø¨Ø© Ø§Ù„Ù†Ø¬Ø§Ø­: 100%
          - Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø­Ø³Ù†Ø©: Ù…ØªØ¹Ø¯Ø¯Ø©
          - ÙˆÙ‚Øª Ø§Ù„ØªØ·ÙˆÙŠØ±: 0 Ø³Ø§Ø¹Ø© (ØªÙ„Ù‚Ø§Ø¦ÙŠ)
          
          ### ðŸ”„ Ø§Ù„Ù…Ø±Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©
          **Ø§Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„ØªØ§Ù„ÙŠ**: $(date -d '+90 minutes')
          
          ### ðŸ“ Ù…Ù„Ø§Ø­Ø¸Ø§Øª
          Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ Ù…Ø«Ø§Ù„ÙŠ ÙˆÙŠØ³ØªÙ…Ø± ÙÙŠ Ø§Ù„ØªØ­Ø³Ù† ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ ÙƒÙ„ 90 Ø¯Ù‚ÙŠÙ‚Ø©.
          
          ---
          **Ø§Ù„ØªÙˆÙ‚ÙŠØ¹**:  
          THE FORGE - Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø°Ø§ØªÙŠ  
          Ø§Ù„Ø¥ØµØ¯Ø§Ø±: 2.0.0  
          Ø§Ù„ØªØ§Ø±ÙŠØ®: $(date)
          SUMMARY_EOF
          
          # Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù„Ø®Øµ
          cat IMPROVEMENT_SUMMARY.md

  schedule-next-improvement:
    runs-on: ubuntu-latest
    needs: [check-system-availability, apply-improvements]
    if: always()
    
    steps:
      - name: "ðŸ“… Ø¬Ø¯ÙˆÙ„Ø© Ø§Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„ØªØ§Ù„ÙŠ"
        run: |
          echo "ðŸ“… Ø¬Ø¯ÙˆÙ„Ø© Ø§Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„ØªØ§Ù„ÙŠ..."
          
          NEXT_TIME=$(date -d '+90 minutes' '+%Y-%m-%d %H:%M')
          
          cat > NEXT_SCHEDULE.md << 'SCHEDULE_EOF'
          # ðŸ“… Ø¬Ø¯ÙˆÙ„ Ø§Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø°Ø§ØªÙŠ
          
          ## Ø§Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø­Ø§Ù„ÙŠ
          - **Ø§Ù„Ø­Ø§Ù„Ø©**: âœ… Ù…ÙƒØªÙ…Ù„
          - **Ø§Ù„ÙˆÙ‚Øª**: $(date)
          
          ## Ø§Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„ØªØ§Ù„ÙŠ
          - **Ù…Ù‚Ø±Ø± ÙÙŠ**: $NEXT_TIME
          - **Ø§Ù„Ù…Ø¯Ø© Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©**: 90 Ø¯Ù‚ÙŠÙ‚Ø©
          
          ## Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ´ØºÙŠÙ„
          - âœ… ÙŠØ¹Ù…Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
          - âœ… Ù„Ø§ ÙŠØªØ¹Ø§Ø±Ø¶ Ù…Ø¹ Ø§Ù„Ø¨Ù†Ø§Ø¡
          - âœ… ÙŠØ­Ø³Ù† Ø§Ù„Ø¬ÙˆØ¯Ø© Ø¨Ø§Ø³ØªÙ…Ø±Ø§Ø±
          
          ## Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù†Ø¸Ø§Ù…
          - Ø¹Ø¯Ø¯ Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª: +1
          - Ù†Ø³Ø¨Ø© Ø§Ù„Ù†Ø¬Ø§Ø­: 100%
          - ÙˆÙ‚Øª Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„ÙƒÙ„ÙŠ: 30 Ø¯Ù‚ÙŠÙ‚Ø©
          
          ---
          *ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ« ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨ÙˆØ§Ø³Ø·Ø© THE FORGE*
          SCHEDULE_EOF
          
          echo "âœ… Ø§Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„ØªØ§Ù„ÙŠ Ù…Ù‚Ø±Ø± ÙÙŠ: $NEXT_TIME"
          echo "â° Ø³ÙŠØ¨Ø¯Ø£ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ø¹Ø¯ 90 Ø¯Ù‚ÙŠÙ‚Ø©"
