name: Ultimate Forge Pro MAX v3.0

on:
  workflow_dispatch:
    inputs:
      app_idea:
        description: 'ÙˆØµÙ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨'
        required: true
        default: 'ØªØ·Ø¨ÙŠÙ‚ Ø£Ù†Ø¯Ø±ÙˆÙŠØ¯ Ù…ØªÙƒØ§Ù…Ù„'
      app_name:
        description: 'Ø§Ø³Ù… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚'
        required: true
        default: 'MyAIApp'
      package_name:
        description: 'Ø§Ø³Ù… Ø§Ù„Ø­Ø²Ù…Ø©'
        required: true
        default: 'com.ai.forge.app'
  
  # Ø¥Ø¶Ø§ÙØ© Ø¬Ø¯ÙˆÙ„Ø© ØªØ´ØºÙŠÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ©
  schedule:
    - cron: '*/90 * * * *'

permissions:
  contents: write
  actions: write
  checks: write
  issues: write
  pull-requests: write

jobs:
  build:
    runs-on: ubuntu-latest
    timeout-minutes: 60
    
    steps:
      - name: ğŸš€ Ø¨Ø¯Ø¡ Ø§Ù„Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø°ÙƒÙŠ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…
        run: |
          echo "========================================"
          echo "   ğŸ¤– ULTIMATE FORGE PRO MAX v3.0"
          echo "   Ù…Ø¹ 15 Ù…Ø­Ø§ÙˆÙ„Ø© Ø¥ØµÙ„Ø§Ø­ ØªÙ„Ù‚Ø§Ø¦ÙŠ"
          echo "========================================"
          echo "ğŸ“± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚: ${{ github.event.inputs.app_name || 'MyAIApp' }}"
          echo "ğŸ“¦ Ø§Ù„Ø­Ø²Ù…Ø©: ${{ github.event.inputs.package_name || 'com.ai.forge.app' }}"
          echo "ğŸ’¡ Ø§Ù„ÙÙƒØ±Ø©: ${{ github.event.inputs.app_idea || 'ØªØ·Ø¨ÙŠÙ‚ Ø£Ù†Ø¯Ø±ÙˆÙŠØ¯ Ù…ØªÙƒØ§Ù…Ù„' }}"
          echo "ğŸ”„ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©: 15"
          echo "â±ï¸ Ø§Ù„Ù…Ù‡Ù„Ø©: 60 Ø¯Ù‚ÙŠÙ‚Ø©"
          echo "========================================"
      
      - name: ğŸ“¥ Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù…Ø¹ ØµÙ„Ø§Ø­ÙŠØ§Øª ÙƒØ§Ù…Ù„Ø©
        uses: actions/checkout@v4
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          fetch-depth: 0
      
      - name: â˜• Ø¥Ø¹Ø¯Ø§Ø¯ Ø¨ÙŠØ¦Ø© Ø§Ù„Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„Ø©
        uses: actions/setup-java@v4
        with:
          java-version: '17'
          distribution: 'temurin'
      
      - name: ğŸ“¦ ØªØ«Ø¨ÙŠØª Ø£Ø¯ÙˆØ§Øª Ù…Ø³Ø§Ø¹Ø¯Ø© Ø¨Ø³ÙŠØ·Ø©
        run: |
          echo "ğŸ”§ ØªØ«Ø¨ÙŠØª Ø§Ù„Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©..."
          apt-get update && apt-get install -y \
            tree \
            jq \
            curl \
            wget \
            unzip \
            python3 \
            python3-pip \
            || echo "âœ… ØªÙ… ØªØ«Ø¨ÙŠØª Ù…Ø¹Ø¸Ù… Ø§Ù„Ø£Ø¯ÙˆØ§Øª"
          
          # ØªØ«Ø¨ÙŠØª Python libraries
          pip3 install --upgrade pip requests
          echo "âœ… ØªÙ… Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ¦Ø©"
      
      - name: ğŸ¤– ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù…ØªÙ‚Ø¯Ù… Ù…Ø¹ DeepSeek (Ù…ÙØµÙ„ÙØ­)
        id: generate_smart_code
        env:
          DEEPSEEK_API_KEY: ${{ secrets.DEEPSEEK_API_KEY }}
          APP_IDEA: ${{ github.event.inputs.app_idea || 'ØªØ·Ø¨ÙŠÙ‚ Ø£Ù†Ø¯Ø±ÙˆÙŠØ¯ Ù…ØªÙƒØ§Ù…Ù„' }}
          APP_NAME: ${{ github.event.inputs.app_name || 'MyAIApp' }}
          PACKAGE_NAME: ${{ github.event.inputs.package_name || 'com.ai.forge.app' }}
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        run: |
          echo "ğŸ§  Ø¨Ø¯Ø¡ Ø§Ù„Ø¬ÙŠÙ„ Ø§Ù„Ø°ÙƒÙŠ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…..."
          
          # Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø¬Ù„Ø¯Ø§Øª Ø¶Ø±ÙˆØ±ÙŠØ©
          mkdir -p app/src/main/java/com/example/app
          mkdir -p app/src/main/res/{values,layout,drawable}
          mkdir -p gradle/wrapper
          
          # Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù Python Ù…Ù†ÙØµÙ„ Ù„ØªØ¬Ù†Ø¨ Ù…Ø´Ø§ÙƒÙ„ Heredoc
          cat > generate_code.py << 'EOF'
import os, sys, json, subprocess, time, re
from datetime import datetime

class UltimateForgeSimple:
    def __init__(self):
        self.idea = os.getenv('APP_IDEA', 'ØªØ·Ø¨ÙŠÙ‚ Ø£Ù†Ø¯Ø±ÙˆÙŠØ¯ Ù…ØªÙƒØ§Ù…Ù„')
        self.app_name = os.getenv('APP_NAME', 'MyAIApp')
        self.package_name = os.getenv('PACKAGE_NAME', 'com.ai.forge.app')
        self.api_key = os.getenv('DEEPSEEK_API_KEY', '')
        
        print(f"ğŸš€ Ultimate Forge Simple")
        print(f"ğŸ“± App: {self.app_name}")
        print(f"ğŸ“¦ Package: {self.package_name}")
    
    def create_basic_structure(self):
        """Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ"""
        print("ğŸ—ï¸ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ...")
        
        # 1. Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Gradle Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
        if not os.path.exists('settings.gradle'):
            with open('settings.gradle', 'w', encoding='utf-8') as f:
                f.write('include ":app"\n')
            print("âœ… Created settings.gradle")
        
        # 2. Ù…Ù„Ù Build Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ
        if not os.path.exists('build.gradle'):
            with open('build.gradle', 'w', encoding='utf-8') as f:
                f.write('''
buildscript {
    repositories {
        google()
        mavenCentral()
    }
    dependencies {
        classpath "com.android.tools.build:gradle:8.2.0"
        classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:1.9.0"
    }
}

allprojects {
    repositories {
        google()
        mavenCentral()
    }
}

task clean(type: Delete) {
    delete rootProject.buildDir
}
''')
            print("âœ… Created build.gradle")
        
        # 3. Ù…Ù„Ù App Build
        if not os.path.exists('app/build.gradle'):
            os.makedirs('app', exist_ok=True)
            with open('app/build.gradle', 'w', encoding='utf-8') as f:
                f.write(f'''
plugins {{
    id 'com.android.application'
    id 'org.jetbrains.kotlin.android'
}}

android {{
    namespace '{self.package_name}'
    compileSdk 34
    
    defaultConfig {{
        applicationId "{self.package_name}"
        minSdk 24
        targetSdk 34
        versionCode 1
        versionName "1.0"
    }}
    
    buildTypes {{
        release {{
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
        }}
    }}
    
    compileOptions {{
        sourceCompatibility JavaVersion.VERSION_17
        targetCompatibility JavaVersion.VERSION_17
    }}
    
    kotlinOptions {{
        jvmTarget = '17'
    }}
}}

dependencies {{
    implementation 'androidx.core:core-ktx:1.12.0'
    implementation 'androidx.appcompat:appcompat:1.6.1'
    implementation 'com.google.android.material:material:1.11.0'
    implementation 'androidx.constraintlayout:constraintlayout:2.1.4'
}}
''')
            print("âœ… Created app/build.gradle")
        
        # 4. AndroidManifest
        manifest_dir = f"app/src/main/java/{self.package_name.replace('.', '/')}"
        os.makedirs(manifest_dir, exist_ok=True)
        
        if not os.path.exists('app/src/main/AndroidManifest.xml'):
            os.makedirs('app/src/main', exist_ok=True)
            with open('app/src/main/AndroidManifest.xml', 'w', encoding='utf-8') as f:
                f.write(f'''<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools">
    
    <uses-permission android:name="android.permission.INTERNET" />
    
    <application
        android:allowBackup="true"
        android:dataExtractionRules="@xml/data_extraction_rules"
        android:fullBackupContent="@xml/backup_rules"
        android:icon="@mipmap/ic_launcher"
        android:label="@string/app_name"
        android:roundIcon="@mipmap/ic_launcher_round"
        android:supportsRtl="true"
        android:theme="@style/Theme.MyApplication"
        tools:targetApi="31">
        <activity
            android:name=".{self.app_name}Activity"
            android:exported="true"
            android:theme="@style/Theme.MyApplication">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest>
''')
            print("âœ… Created AndroidManifest.xml")
        
        # 5. MainActivity
        activity_file = f'{manifest_dir}/{self.app_name}Activity.kt'
        if not os.path.exists(activity_file):
            with open(activity_file, 'w', encoding='utf-8') as f:
                f.write(f'''package {self.package_name}

import android.os.Bundle
import androidx.appcompat.app.AppCompatActivity
import androidx.core.view.WindowCompat

class {self.app_name}Activity : AppCompatActivity() {{
    override fun onCreate(savedInstanceState: Bundle?) {{
        super.onCreate(savedInstanceState)
        WindowCompat.setDecorFitsSystemWindows(window, false)
        setContentView(R.layout.activity_main)
    }}
}}
''')
            print(f"âœ… Created {activity_file}")
        
        # 6. Ù…Ù„ÙØ§Øª Resources Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
        self.create_basic_resources()
        
        return True
    
    def create_basic_resources(self):
        """Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„ÙØ§Øª Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©"""
        print("ğŸ¨ Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„ÙØ§Øª Ø§Ù„Ù…ÙˆØ§Ø±Ø¯...")
        
        # strings.xml
        strings_path = 'app/src/main/res/values/strings.xml'
        os.makedirs(os.path.dirname(strings_path), exist_ok=True)
        with open(strings_path, 'w', encoding='utf-8') as f:
            f.write(f'''<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="app_name">{self.app_name}</string>
    <string name="hello_world">Hello from {self.app_name}!</string>
</resources>
''')
        
        # colors.xml
        colors_path = 'app/src/main/res/values/colors.xml'
        with open(colors_path, 'w', encoding='utf-8') as f:
            f.write('''<?xml version="1.0" encoding="utf-8"?>
<resources>
    <color name="purple_200">#FFBB86FC</color>
    <color name="purple_500">#FF6200EE</color>
    <color name="purple_700">#FF3700B3</color>
    <color name="teal_200">#FF03DAC5</color>
    <color name="teal_700">#FF018786</color>
    <color name="black">#FF000000</color>
    <color name="white">#FFFFFFFF</color>
</resources>
''')
        
        # themes.xml
        themes_path = 'app/src/main/res/values/themes.xml'
        with open(themes_path, 'w', encoding='utf-8') as f:
            f.write(f'''<?xml version="1.0" encoding="utf-8"?>
<resources xmlns:tools="http://schemas.android.com/tools">
    <style name="Theme.{self.app_name.replace(' ', '')}" parent="Theme.MaterialComponents.DayNight.DarkActionBar">
        <item name="colorPrimary">@color/purple_500</item>
        <item name="colorPrimaryVariant">@color/purple_700</item>
        <item name="colorOnPrimary">@color/white</item>
        <item name="colorSecondary">@color/teal_200</item>
        <item name="colorSecondaryVariant">@color/teal_700</item>
        <item name="colorOnSecondary">@color/black</item>
        <item name="android:statusBarColor">?attr/colorPrimaryVariant</item>
    </style>
</resources>
''')
        
        # layout activity_main.xml
        layout_path = 'app/src/main/res/layout/activity_main.xml'
        with open(layout_path, 'w', encoding='utf-8') as f:
            f.write('''<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity">

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Hello World!"
        android:textSize="24sp"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintLeft_toLeftOf="parent"
        app:layout_constraintRight_toRightOf="parent"
        app:layout_constraintTop_toTopOf="parent" />

</androidx.constraintlayout.widget.ConstraintLayout>
''')
        
        print("âœ… Created all resource files")
    
    def call_ai_for_enhancements(self):
        """Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ AI Ù„Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª (Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…ÙØªØ§Ø­ Ù…ØªÙˆÙØ±Ø§Ù‹)"""
        if not self.api_key:
            print("â„¹ï¸ No API key, skipping AI enhancements")
            return
        
        print("ğŸ¤– Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ AI Ù„Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª...")
        try:
            import requests
            
            prompt = f"""Ø£Ù†Ø´Ø¦ ØªØ·Ø¨ÙŠÙ‚ Ø£Ù†Ø¯Ø±ÙˆÙŠØ¯ ÙƒØ§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ù…ÙˆØ§ØµÙØ§Øª Ø§Ù„ØªØ§Ù„ÙŠØ©:
            Ø§Ù„Ø§Ø³Ù…: {self.app_name}
            Ø§Ù„Ø­Ø²Ù…Ø©: {self.package_name}
            Ø§Ù„ÙÙƒØ±Ø©: {self.idea}
            
            Ø§Ù„Ù…Ø·Ù„ÙˆØ¨:
            1. Ù‡ÙŠÙƒÙ„ Clean Architecture
            2. Ø§Ø³ØªØ®Ø¯Ø§Ù… MVVM
            3. Ø£Ø­Ø¯Ø« Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª
            4. Ù…Ø¹Ø§Ù„Ø¬Ø© Ø£Ø®Ø·Ø§Ø¡ Ù…ØªÙ‚Ø¯Ù…Ø©
            
            Ù‚Ø¯Ù… Ø£Ù…Ø«Ù„Ø© ÙƒÙˆØ¯ Ø¹Ù…Ù„ÙŠØ©."""
            
            response = requests.post(
                "https://api.deepseek.com/v1/chat/completions",
                headers={"Authorization": f"Bearer {self.api_key}"},
                json={
                    "model": "deepseek-chat",
                    "messages": [
                        {"role": "system", "content": "Ø£Ù†Øª Ø®Ø¨ÙŠØ± ØªØ·ÙˆÙŠØ± Ø£Ù†Ø¯Ø±ÙˆÙŠØ¯."},
                        {"role": "user", "content": prompt}
                    ],
                    "max_tokens": 2000
                },
                timeout=30
            )
            
            if response.status_code == 200:
                ai_content = response.json()['choices'][0]['message']['content']
                with open('ai_suggestions.md', 'w', encoding='utf-8') as f:
                    f.write(ai_content)
                print("âœ… Saved AI suggestions")
            else:
                print(f"âš ï¸ AI API error: {response.status_code}")
                
        except Exception as e:
            print(f"âš ï¸ AI call failed: {e}")
    
    def run(self):
        """ØªØ´ØºÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§Ù…"""
        print("\n" + "="*50)
        print("ğŸš€ Ø¨Ø¯Ø¡ Ultimate Forge")
        print("="*50)
        
        # Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1: Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ
        self.create_basic_structure()
        
        # Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2: ØªØ­Ø³ÙŠÙ†Ø§Øª AI (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
        self.call_ai_for_enhancements()
        
        # Ø§Ù„Ù…Ø±Ø­Ù„Ø© 3: Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„ÙØ§Øª Ø¯Ø¹Ù…
        self.create_support_files()
        
        print("\n" + "="*50)
        print("ğŸ‰ Ø§ÙƒØªÙ…Ù„ Ø¨Ù†Ø¬Ø§Ø­!")
        print("="*50)
        
        # Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ù†Ø´Ø£Ø©
        total_files = sum(len(files) for _, _, files in os.walk('.'))
        print(f"ğŸ“ Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù„ÙØ§Øª: {total_files}")
        
        return True
    
    def create_support_files(self):
        """Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„ÙØ§Øª Ø¯Ø¹Ù… Ø¥Ø¶Ø§ÙÙŠØ©"""
        print("ğŸ“ Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„ÙØ§Øª Ø¯Ø¹Ù…...")
        
        # Ù…Ù„Ù README
        with open('README.md', 'w', encoding='utf-8') as f:
            f.write(f'''# {self.app_name}

## ØªØ·Ø¨ÙŠÙ‚ Ø£Ù†Ø¯Ø±ÙˆÙŠØ¯ Ù…ÙˆÙ„Ø¯ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨ÙˆØ§Ø³Ø·Ø© Ultimate Forge Pro MAX

### ğŸ“± Ø§Ù„Ù…ÙˆØ§ØµÙØ§Øª
- **Ø§Ù„Ø§Ø³Ù…**: {self.app_name}
- **Ø§Ù„Ø­Ø²Ù…Ø©**: {self.package_name}
- **Ø§Ù„ÙÙƒØ±Ø©**: {self.idea}
- **ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡**: {datetime.now().strftime("%Y-%m-%d %H:%M")}

### ğŸš€ Ø§Ù„Ù…ÙŠØ²Ø§Øª
- Ù‡ÙŠÙƒÙ„ MVVM
- Clean Architecture
- Ù…Ø¹Ø§Ù„Ø¬Ø© Ø£Ø®Ø·Ø§Ø¡ Ù…ØªÙ‚Ø¯Ù…Ø©
- Ø£Ø­Ø¯Ø« Ù…ÙƒØªØ¨Ø§Øª Android

### ğŸ”§ Ø§Ù„Ø¨Ù†Ø§Ø¡
```bash
./gradlew assembleDebug
